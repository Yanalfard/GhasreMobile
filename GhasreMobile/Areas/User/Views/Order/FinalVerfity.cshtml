@model DiscountVm
@if (Model != null)
{
    <form action="/ShopCart/Payment" id="mainForm" class="col g-3" method="post">
        <div class="mat-card">
            <h4 class="uk-margin-small-bottom">
                انتخاب آدرس
            </h4>
            <div class="fg-col">
                <label class="fg-label">آدرس</label>
                <textarea class="entry" name="address" required></textarea>
            </div>
        </div>

        <div class="mat-card">
            <h4 class="uk-margin-small-bottom">
                روش های ارسال
            </h4>
            <div class="fg-col">
                @{
                    List<TblPostOption> list = ViewBag.ListPostOption as List<TblPostOption>;
                }
                @foreach (var item in list)
                {
                    <label class="radio">
                        <span>@item.Name</span>
                        <input id="radio" name="radio" @((list.ToList().IndexOf(item) == 0 ? "checked" : "")) class="uk-radio @item.PostOptionId" value="@item.PostOptionId" type="radio">
                        <span>@item.Price.Value.ToString("#,0")</span>
                    </label>
                }
            </div>
        </div>

        <hr class="uk-divider-icon uk-margin-small" />

        <div class="mat-card col">
            <h3>
                پرداخت
            </h3>
            <p class="uk-alert uk-alert-warning">
                مشتری محترم، لطفا دقت کنید مبلغ پرداخت شده غیر قابل عودت می باشد، لطفا قبل از خرید اطمینان حاصل فرمایید
            </p>


            <div class="rowr">

                <div class="basket-factor box-shadow">
                    <div class="profit-amount">تخفیف  : <span>@Model.DiscountPrice.ToString("#,0") تومان </span></div>
                    <div class="profit-amount">هزینه ارسال  : <span>@Model.PostPrice.ToString("#,0") تومان </span><span>(   فاکتور بالای @Model.SagfePost.ToString("#,0")   شامل هزینه نمی باشد   )</span></div>
                    <div class="main-payment">مبلغ کل : <span>@Model.Sum.ToString("#,0") تومان</span> </div>
                    <div class="main-payment">موجودی کیف پول شما  : <span>@Model.Balance.ToString("#,0") تومان</span> </div>
                    <div class="final-payment">مبلغ قابل پرداخت : <span>@Model.SumWithDiscount.ToString("#,0") تومان</span></div>
                </div>

                <button type="submit" class="mini-wallet uk-margin-auto-top uk-margin-auto-right">
                    <span class="label">ثبت و پرداخت </span>
                    <span class="rowr">
                        <span></span>
                    </span>
                </button>

            </div>
        </div>
    </form>
    <input type="hidden" name="PostPriceId" id="PostPriceId" value="@Model.PostPriceId" />
}


<script>

    $("#mainForm input[type=radio]").change(function () {
        var id = $(this).val();
        window.location.href = "/User/Order/SetPost/" + id;
    });

    $("."+@Model.PostPriceId).prop("checked", true);
</script>
